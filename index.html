<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Birthday Card for Gayathri Akka</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600;700&amp;family=Playfair+Display:wght@700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    .font-handwritten {
      font-family: 'Caveat', cursive;
    }
    
    .font-elegant {
      font-family: 'Playfair Display', serif;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(-2deg); }
      50% { transform: translateY(-10px) rotate(2deg); }
    }
    
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }
    
    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    @keyframes flapOpen {
      0% { 
        transform: rotateX(0deg); 
      }
      100% { 
        transform: rotateX(160deg); 
      }
    }
    
    @keyframes slideOutDown {
      0% { 
        transform: translateY(0); 
        opacity: 1; 
      }
      100% { 
        transform: translateY(120vh); 
        opacity: 0; 
      }
    }
    
    @keyframes slideInUp {
      0% { 
        transform: translateY(120vh); 
        opacity: 0; 
      }
      100% { 
        transform: translateY(0); 
        opacity: 1; 
      }
    }
    
    .envelope-float {
      animation: float 3s ease-in-out infinite;
    }
    
    .sparkle {
      animation: sparkle 2s ease-in-out infinite;
    }
    
    .heartbeat {
      animation: heartbeat 1.5s ease-in-out infinite;
    }
    
    .envelope-flap {
      transform-origin: center center;
      transform-style: preserve-3d;
      perspective: 1200px;
    }
    
    .envelope-animating .envelope-flap {
      animation: flapOpen 2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }
    
    .envelope-animating #envelope-page {
      animation: slideOutDown 2.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }
    
    #card-container.showing {
      animation: slideInUp 2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }
    
    .photo-placeholder {
      background: linear-gradient(135deg, #d4a574 0%, #c4956a 100%);
      border: 3px dashed #8b6914;
    }
    
    .kiss-mark {
      color: #c41e3a;
      text-shadow: 1px 1px 2px rgba(196, 30, 58, 0.3);
    }
    
    .page-transition {
      transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
    }
    
    .reel-container {
      background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
      border-radius: 8px;
      padding: 8px;
    }
    
    .reel-hole {
      width: 8px;
      height: 8px;
      background: #f5f0e6;
      border-radius: 2px;
    }
    
    .doodle-heart {
      color: #c41e3a;
    }
    
    .doodle-star {
      color: #d4a574;
    }
    
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      opacity: 0;
    }
    
    @keyframes confetti-fall {
      0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100%) rotate(720deg); opacity: 0; }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="w-full h-full overflow-auto" style="background: linear-gradient(135deg, #f5f0e6 0%, #e8dfd0 100%);"><!-- Envelope Page -->
   <div id="envelope-page" class="w-full min-h-full flex flex-col items-center justify-center p-8">
    <div class="text-center mb-6"><span class="font-handwritten text-2xl text-gray-700">âœ¨ A special surprise awaits... âœ¨</span>
    </div>
    <div id="envelope" class="envelope-float cursor-pointer relative" onclick="openEnvelope()" style="width: 320px; height: 240px;"><!-- Retro Paper Envelope Body -->
     <div class="absolute inset-0 rounded-sm shadow-2xl" style="background: linear-gradient(180deg, #f4e8d0 0%, #e8dcc0 100%); border: 2px solid #8b7355;"><!-- Vintage paper texture -->
      <div class="absolute inset-0 opacity-5" style="background-image: repeating-linear-gradient(0deg, #333 0px, #333 1px, transparent 1px, transparent 2px);"></div><!-- Subtle aged spots -->
      <div class="absolute top-8 left-6 w-2 h-2 rounded-full opacity-10" style="background: #333;"></div>
      <div class="absolute bottom-12 right-10 w-3 h-3 rounded-full opacity-15" style="background: #333;"></div>
     </div><!-- Retro Triangular Flap with texture -->
     <div class="envelope-flap absolute top-0 left-0 right-0" style="height: 120px; perspective: 1000px;">
      <svg viewbox="0 0 320 120" class="w-full h-full drop-shadow-lg" style="filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));"><defs>
        <lineargradient id="retroFlap" x1="0%" y1="0%" x2="0%" y2="100%">
         <stop offset="0%" style="stop-color:#f4e8d0" />
         <stop offset="100%" style="stop-color:#ddd1bb" />
        </lineargradient>
        <pattern id="paperPattern" x="0" y="0" width="4" height="4" patternunits="userSpaceOnUse">
         <rect width="4" height="4" fill="#f4e8d0" />
         <circle cx="2" cy="2" r="0.5" fill="#333" opacity="0.03" />
        </pattern>
       </defs> <!-- Retro triangle flap --> <path d="M0,120 L160,10 L320,120 Z" fill="url(#retroFlap)" stroke="#8b7355" stroke-width="2" /> <!-- Center crease line --> <line x1="160" y1="10" x2="160" y2="120" stroke="#8b7355" stroke-width="1" opacity="0.3" />
      </svg>
     </div><!-- Classic Red Wax Seal -->
     <div class="absolute top-24 right-8 transform rotate-12">
      <div class="relative" style="width: 100px; height: 100px;"><!-- Outer shadow for depth -->
       <div class="absolute inset-0 rounded-full" style="background: radial-gradient(circle at 30% 30%, rgba(200,30,50,0.3), transparent 70%);"></div><!-- Main wax seal circle -->
       <div class="absolute inset-0 rounded-full flex items-center justify-center heartbeat" style="background: radial-gradient(circle at 35% 35%, #ff3333, #c41e3a 50%, #8b0000 100%); box-shadow: inset -2px -2px 4px rgba(0,0,0,0.4), 0 8px 12px rgba(0,0,0,0.5);"><!-- Glossy shine on wax -->
        <div class="absolute top-2 left-3 w-6 h-6 rounded-full opacity-40" style="background: radial-gradient(circle, white 0%, transparent 70%);"></div><!-- Decorative seal impression (stamped) -->
        <svg viewbox="0 0 100 100" class="absolute inset-0 w-full h-full" style="opacity: 0.7;"><circle cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1.5" /> <circle cx="50" cy="50" r="35" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="1" /> <text x="50" y="45" text-anchor="middle" font-family="Georgia, serif" font-size="16" fill="rgba(255,255,255,0.4)" font-weight="bold">
          âœ¦
         </text> <text x="50" y="62" text-anchor="middle" font-family="Georgia, serif" font-size="12" fill="rgba(255,255,255,0.3)">
          OPEN
         </text>
        </svg>
       </div><!-- Wax drip effect at bottom -->
       <div class="absolute -bottom-3 left-1/2 transform -translate-x-1/2" style="width: 12px; height: 8px; background: radial-gradient(ellipse, #c41e3a 0%, #8b0000 100%); border-radius: 50% 50% 60% 40%; opacity: 0.8;"></div>
       <div class="absolute -bottom-1 left-1/3" style="width: 8px; height: 5px; background: #c41e3a; border-radius: 50% 50% 60% 40%; opacity: 0.6;"></div>
      </div>
     </div><!-- Vintage postage stamp effect -->
     <div class="absolute top-6 left-8 p-2" style="background: #f4e8d0; border: 1px dashed #8b7355; width: 50px; height: 60px; display: flex; align-items: center; justify-content: center; transform: rotate(-8deg); box-shadow: 0 2px 4px rgba(0,0,0,0.2);"><span style="font-size: 24px; opacity: 0.7;">ğŸ“®</span>
     </div><!-- Decorative corner flourishes -->
     <div class="absolute bottom-8 left-6 text-2xl opacity-60 transform -rotate-12">
      ğ”–
     </div>
     <div class="absolute top-28 right-12 text-2xl opacity-50 transform rotate-6">
      âœ¦
     </div>
    </div>
    <p class="font-handwritten text-xl text-gray-600 mt-6 animate-pulse">Click the envelope to open! ğŸ’Œ</p>
   </div><!-- Card Pages Container -->
   <div id="card-container" class="hidden w-full min-h-full"><!-- Page 1: Birthday Greeting -->
    <div id="page-1" class="page w-full min-h-full flex flex-col items-center justify-center p-4 page-transition">
     <div class="relative w-full max-w-2xl p-8 rounded-2xl shadow-2xl" style="background: linear-gradient(145deg, #f5f0e6 0%, #ebe3d5 100%); border: 2px solid #d4c4a8; overflow: hidden;"><!-- Scattered lipstick kisses - varied sizes and positions -->
      <div class="absolute top-2 left-2 text-5xl kiss-mark transform -rotate-12 pointer-events-none">
       ğŸ’‹
      </div>
      <div class="absolute top-8 right-4 text-2xl kiss-mark transform rotate-6 pointer-events-none">
       ğŸ’‹
      </div>
      <div class="absolute bottom-16 left-6 text-4xl kiss-mark transform rotate-12 pointer-events-none">
       ğŸ’‹
      </div>
      <div class="absolute bottom-6 right-2 text-3xl kiss-mark transform -rotate-6 pointer-events-none">
       ğŸ’‹
      </div>
      <div class="absolute top-1/3 right-6 text-xl kiss-mark transform rotate-45 pointer-events-none">
       ğŸ’‹
      </div>
      <div class="absolute top-12 left-4 text-3xl kiss-mark transform -rotate-20 pointer-events-none">
       ğŸ’‹
      </div>
      <div class="absolute bottom-20 right-8 text-2xl kiss-mark transform rotate-35 pointer-events-none">
       ğŸ’‹
      </div><!-- Scattered camera doodles - varied sizes -->
      <div class="absolute top-4 left-1/4 text-4xl transform -rotate-12 pointer-events-none">
       ğŸ“¸
      </div>
      <div class="absolute bottom-10 right-1/4 text-3xl transform rotate-6 pointer-events-none">
       ğŸ“·
      </div>
      <div class="absolute top-1/2 left-3 text-2xl transform rotate-12 pointer-events-none">
       ğŸ¬
      </div>
      <div class="absolute top-20 right-6 text-2xl transform -rotate-25 pointer-events-none">
       ğŸ“¸
      </div><!-- Party doodles scattered around -->
      <div class="absolute bottom-4 right-4 text-4xl transform rotate-15 pointer-events-none">
       ğŸ‰
      </div>
      <div class="absolute top-16 right-1/3 text-3xl transform -rotate-8 pointer-events-none">
       ğŸˆ
      </div>
      <div class="absolute bottom-12 left-1/4 text-2xl transform rotate-20 pointer-events-none">
       ğŸ
      </div>
      <div class="absolute top-1/4 left-6 text-3xl transform rotate-10 pointer-events-none">
       ğŸ‚
      </div><!-- Main greeting -->
      <div class="text-center py-8 px-6 relative z-10">
       <div class="font-elegant font-bold text-gray-900 leading-tight" id="greeting-text" style="font-size: clamp(2.5rem, 12vw, 4rem);">
        Happy Birthday<br><span id="recipient-display" class="block" style="color: #1a1a1a; font-size: clamp(3rem, 14vw, 5rem);">Gayathri Akkaaa!!!</span>
       </div><!-- Decorative elements center -->
       <div class="mt-6 flex justify-center gap-2 flex-wrap"><span class="text-3xl">ğŸ‚</span> <span class="text-3xl">ğŸ‰</span> <span class="text-3xl">ğŸ</span> <span class="text-3xl">ğŸˆ</span>
       </div>
      </div><!-- More scattered doodles -->
      <div class="absolute top-1/3 left-2 text-3xl kiss-mark pointer-events-none">
       ğŸ’‹
      </div>
      <div class="absolute bottom-1/3 right-3 text-2xl pointer-events-none">
       ğŸ“¸
      </div>
      <div class="absolute top-2/3 right-10 text-3xl kiss-mark transform -rotate-30 pointer-events-none">
       ğŸ’‹
      </div>
     </div><button onclick="nextPage(2)" class="mt-8 font-handwritten text-xl text-gray-700 hover:text-gray-900 transition-colors flex items-center gap-2"> Continue reading â†’ ğŸ’Œ </button>
    </div><!-- Page 2: Letter with Photo Reel -->
    <div id="page-2" class="page hidden w-full min-h-full p-6 page-transition">
     <div class="w-full max-w-4xl mx-auto flex flex-col md:flex-row gap-6 items-stretch"><!-- Left: Letter -->
      <div class="flex-1 p-6 rounded-2xl shadow-xl" style="background: linear-gradient(145deg, #f5f0e6 0%, #ebe3d5 100%); border: 2px solid #d4c4a8;">
       <div class="text-center mb-4"><span class="text-2xl">ğŸ’Œ</span>
        <h2 class="font-elegant text-2xl font-bold text-gray-900">A Letter For You</h2>
       </div>
       <div class="font-handwritten text-xl text-gray-800 leading-relaxed space-y-4" id="letter-display">
        <p>Dearest Gayathri Akka,</p>
        <p>On your special day, I wanted to tell you how much you mean to us. You're not just our akka, you're our friend, our guide, and our biggest cheerleader! ğŸ’•</p>
        <p>Every moment spent with you is filled with laughter, love, and unforgettable memories. You make everything brighter just by being you!</p>
        <p>Thank you for always being there, for your endless patience, and for showing me what it means to be kind and strong.</p>
        <p>Wishing you all the happiness in the world today and always! ğŸŒŸ</p>
        <p class="text-right mt-6">With all our love,<br>
         Laasya and Sharanya ğŸ˜‰ğŸ’—</p>
       </div><!-- Decorative doodles -->
       <div class="absolute bottom-4 left-4 text-lg">
        âœ¨
       </div>
       <div class="absolute top-4 right-4 text-lg kiss-mark">
        ğŸ’‹
       </div>
      </div><!-- Right: Photo Reel -->
      <div class="w-full md:w-48 flex flex-col items-center">
       <div class="reel-container w-full"><!-- Film holes top -->
        <div class="flex justify-between px-2 mb-2">
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
        </div><!-- Photo 1 -->
        <img src="reel1.jpg" class="w-full h-36 object-cover rounded mb-2" />
         <div class="text-center"><span class="text-3xl">ğŸ“·</span>
          <p class="font-handwritten text-sm text-gray-700 mt-1">Photo 1</p>
         </div>
        </div><!-- Film holes -->
        <div class="flex justify-between px-2 mb-2">
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
        </div><!-- Photo 2 -->
        <img src="reel2.jpg" class="w-full h-36 object-cover rounded mb-2" />
         <div class="text-center"><span class="text-3xl">ğŸ“¸</span>
          <p class="font-handwritten text-sm text-gray-700 mt-1">Photo 2</p>
         </div>
        </div><!-- Film holes -->
        <div class="flex justify-between px-2 mb-2">
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
        </div><!-- Photo 3 -->
        <img src="reel3.jpg" class="w-full h-36 object-cover rounded mb-2" />
         <div class="text-center"><span class="text-3xl">ğŸ¬</span>
          <p class="font-handwritten text-sm text-gray-700 mt-1">Photo 3</p>
         </div>
        </div><!-- Film holes bottom -->
        <div class="flex justify-between px-2">
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
         <div class="reel-hole"></div>
        </div>
       </div>
      </div>
     </div>
     <div class="text-center mt-6"><button onclick="nextPage(3)" class="font-handwritten text-xl text-gray-700 hover:text-gray-900 transition-colors"> See more memories â†’ ğŸ“¸ </button>
     </div>
    </div><!-- Page 3: Photo Gallery -->
    <div id="page-3" class="page hidden w-full min-h-full p-6 page-transition">
     <div class="w-full max-w-3xl mx-auto">
      <div class="text-center mb-6">
       <h2 class="font-elegant text-3xl font-bold text-gray-900">Our Beautiful Memories ğŸ’•</h2>
       <p class="font-handwritten text-xl text-gray-600 mt-2">Every picture tells our story...</p>
      </div>
      <div class="p-6 rounded-2xl shadow-xl" style="background: linear-gradient(145deg, #f5f0e6 0%, #ebe3d5 100%); border: 2px solid #d4c4a8;"><!-- Photo grid -->
       <div class="grid grid-cols-2 gap-4"><!-- Photo 1 -->
        <div class="relative">
         <img src="memory1.jpg" class="w-full h-48 object-cover rounded-lg" />
          <div class="text-center"><span class="text-4xl">ğŸ“·</span>
           <p class="font-handwritten text-gray-700 mt-2">Memory 1</p>
          </div>
         </div>
         <div class="absolute -top-2 -right-2 text-xl">
          ğŸ’—
         </div>
        </div><!-- Photo 2 -->
        <div class="relative">
         <img src="memory2.jpg" class="w-full h-48 object-cover rounded-lg" />
          <div class="text-center"><span class="text-4xl">ğŸ“¸</span>
           <p class="font-handwritten text-gray-700 mt-2">Memory 2</p>
          </div>
         </div>
         <div class="absolute -bottom-2 -left-2 text-xl">
          âœ¨
         </div>
        </div><!-- Photo 3 -->
        <div class="relative">
         <img src="memory3.jpg" class="w-full h-48 object-cover rounded-lg" />
          <div class="text-center"><span class="text-4xl">ğŸ¬</span>
           <p class="font-handwritten text-gray-700 mt-2">Memory 3</p>
          </div>
         </div>
         <div class="absolute -top-2 -left-2 text-lg kiss-mark">
          ğŸ’‹
         </div>
        </div><!-- Photo 4 -->
        <div class="relative">
         <img src="memory4.jpg" class="w-full h-48 object-cover rounded-lg" />
          <div class="text-center"><span class="text-4xl">ğŸ“·</span>
           <p class="font-handwritten text-gray-700 mt-2">Memory 4</p>
          </div>
         </div>
         <div class="absolute -bottom-2 -right-2 text-xl">
          ğŸŒŸ
         </div>
        </div>
       </div><!-- Decorative doodles -->
       <div class="flex justify-center gap-4 mt-6"><span class="text-2xl">ğŸ‚</span> <span class="text-2xl">ğŸˆ</span> <span class="text-2xl">ğŸ</span> <span class="text-2xl">ğŸ‰</span>
       </div>
      </div><!-- Cute corner doodles -->
      <div class="flex justify-between mt-4 px-4"><span class="text-2xl transform -rotate-12">ğŸ’•</span> <span class="text-2xl">ğŸ“¸</span> <span class="text-2xl transform rotate-12">âœ¨</span>
      </div>
     </div>
     <div class="text-center mt-6"><button onclick="nextPage(4)" class="font-handwritten text-xl text-gray-700 hover:text-gray-900 transition-colors"> One more surprise â†’ ğŸ </button>
     </div>
    </div><!-- Page 4: Final Messages -->
    <div id="page-4" class="page hidden w-full min-h-full p-6 page-transition">
     <div class="w-full max-w-2xl mx-auto">
      <div class="text-center mb-6"><span class="text-4xl">ğŸ‚</span>
       <h2 class="font-elegant text-3xl font-bold text-gray-900 mt-2">Birthday Wishes</h2>
       <p class="font-handwritten text-xl text-gray-600">Just for you, Gayathri Akka! ğŸ’—</p>
      </div>
      <div class="space-y-4"><!-- Message 1 -->
       <div class="p-5 rounded-xl shadow-lg transform hover:scale-102 transition-transform" style="background: linear-gradient(145deg, #f5f0e6 0%, #ebe3d5 100%); border: 2px solid #d4c4a8;">
        <div class="flex items-start gap-3"><span class="text-2xl">ğŸŒŸ</span>
         <p class="font-handwritten text-xl text-gray-800">May your year ahead be as beautiful and bright as your smile! Keep shining, akka!</p>
        </div>
       </div><!-- Message 2 -->
       <div class="p-5 rounded-xl shadow-lg transform hover:scale-102 transition-transform" style="background: linear-gradient(145deg, #f5f0e6 0%, #ebe3d5 100%); border: 2px solid #d4c4a8;">
        <div class="flex items-start gap-3"><span class="text-2xl">ğŸ’•</span>
         <p class="font-handwritten text-xl text-gray-800">You deserve all the cake, all the gifts, and ALL the love in the world! (But especially the cake ğŸ‚ğŸ˜‹)</p>
        </div>
       </div><!-- Message 3 -->
       <div class="p-5 rounded-xl shadow-lg transform hover:scale-102 transition-transform" style="background: linear-gradient(145deg, #f5f0e6 0%, #ebe3d5 100%); border: 2px solid #d4c4a8;">
        <div class="flex items-start gap-3"><span class="text-2xl">ğŸˆ</span>
         <p class="font-handwritten text-xl text-gray-800">Thank you for being the most amazing akka anyone could ask for. I'm so lucky to have you!</p>
        </div>
       </div><!-- Message 4 -->
       <div class="p-5 rounded-xl shadow-lg transform hover:scale-102 transition-transform" style="background: linear-gradient(145deg, #f5f0e6 0%, #ebe3d5 100%); border: 2px solid #d4c4a8;">
        <div class="flex items-start gap-3"><span class="text-2xl">ğŸ</span>
         <p class="font-handwritten text-xl text-gray-800" id="final-message-display">Here's to more adventures, more laughs, more memories, and more late-night talks! Love you to the moon and back! ğŸŒ™ğŸ’—</p>
        </div>
       </div><!-- Final big message -->
       <div class="p-6 rounded-2xl shadow-xl text-center mt-6" style="background: linear-gradient(145deg, #f5f0e6 0%, #ebe3d5 100%); border: 3px solid #c41e3a;">
        <p class="font-elegant text-2xl font-bold text-gray-900">Happy Birthday, Gayathri Akka!</p>
        <p class="font-handwritten text-xl text-gray-700 mt-2">ğŸ‚ May all your dreams come true! ğŸ‚</p>
        <div class="flex justify-center gap-2 mt-4"><span class="text-3xl heartbeat">ğŸ’—</span> <span class="text-3xl heartbeat" style="animation-delay: 0.2s;">ğŸ’—</span> <span class="text-3xl heartbeat" style="animation-delay: 0.4s;">ğŸ’—</span>
        </div>
       </div>
      </div><!-- Restart button -->
      <div class="text-center mt-8"><button onclick="restart()" class="px-6 py-3 rounded-full font-handwritten text-xl text-white shadow-lg hover:shadow-xl transition-all" style="background: linear-gradient(135deg, #c41e3a 0%, #a01830 100%);"> ğŸ”„ Watch Again </button>
      </div><!-- Floating decorations -->
      <div class="flex justify-center gap-6 mt-6"><span class="text-2xl sparkle">âœ¨</span> <span class="text-2xl sparkle" style="animation-delay: 0.3s;">    </span> <span class="text-2xl sparkle" style="animation-delay: 0.6s;">ğŸŠ</span> <span class="text-2xl sparkle" style="animation-delay: 0.9s;">âœ¨</span>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      recipient_name: "Gayathri Akkaaa!!!",
      letter_content: "Dearest Gayathri Akka,\n\nOn your special day, I wanted to tell you how much you mean to me. You're not just an akka, you're my friend, my guide, and my biggest cheerleader! ğŸ’•\n\nEvery moment spent with you is filled with laughter, love, and unforgettable memories. You make everything brighter just by being you!\n\nThank you for always being there, for your endless patience, and for showing me what it means to be kind and strong.\n\nWishing you all the happiness in the world today and always! ğŸŒŸ\n\nWith all my love,\nYour favorite person ğŸ˜‰ğŸ’—",
      final_message: "Here's to more adventures, more laughs, more memories, and more late-night talks! Love you to the moon and back! ğŸŒ™ğŸ’—",
      background_color: "#f5f0e6",
      accent_color: "#c41e3a",
      text_color: "#1a1a1a",
      card_color: "#ebe3d5",
      border_color: "#d4c4a8"
    };

    let config = { ...defaultConfig };
    let envelopeOpened = false;

    function openEnvelope() {
      if (envelopeOpened) return;
      envelopeOpened = true;
      
      const envelope = document.getElementById('envelope');
      const app = document.getElementById('app');
      const cardContainer = document.getElementById('card-container');
      
      envelope.parentElement.classList.add('envelope-animating');
      envelope.classList.remove('envelope-float');
      
      // Show card container immediately
      cardContainer.classList.remove('hidden');
      
      // Start card animation almost immediately
      setTimeout(() => {
        cardContainer.classList.add('showing');
        document.getElementById('page-1').classList.remove('hidden');
      }, 100);
      
      // Create confetti at the peak of the animation
      setTimeout(() => {
        createConfetti();
      }, 1400);
      
      // Hide envelope after animation
      setTimeout(() => {
        document.getElementById('envelope-page').classList.add('hidden');
      }, 2200);
    }

    function nextPage(pageNum) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.add('hidden');
      });
      document.getElementById(`page-${pageNum}`).classList.remove('hidden');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function restart() {
      envelopeOpened = false;
      document.querySelectorAll('.page').forEach(page => {
        page.classList.add('hidden');
      });
      document.getElementById('card-container').classList.add('hidden');
      document.getElementById('card-container').classList.remove('showing');
      document.getElementById('envelope-page').classList.remove('hidden');
      
      const envelope = document.getElementById('envelope');
      envelope.parentElement.classList.remove('envelope-animating');
      envelope.classList.add('envelope-float');
    }

    function createConfetti() {
      const colors = ['#c41e3a', '#d4c4a8', '#f5f0e6', '#ffd700', '#ff69b4'];
      const container = document.getElementById('page-1');
      
      for (let i = 0; i < 30; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        confetti.style.animation = `confetti-fall ${2 + Math.random() * 2}s ease-out forwards`;
        confetti.style.animationDelay = Math.random() * 0.5 + 's';
        container.appendChild(confetti);
        
        setTimeout(() => confetti.remove(), 4000);
      }
    }

    async function onConfigChange(newConfig) {
      config = { ...defaultConfig, ...newConfig };
      
      const recipientDisplay = document.getElementById('recipient-display');
      if (recipientDisplay) {
        recipientDisplay.textContent = config.recipient_name || defaultConfig.recipient_name;
      }
      
      const letterDisplay = document.getElementById('letter-display');
      if (letterDisplay) {
        const letterContent = config.letter_content || defaultConfig.letter_content;
        const paragraphs = letterContent.split('\n\n');
        letterDisplay.innerHTML = paragraphs.map(p => `<p>${p}</p>`).join('');
      }
      
      const finalMessage = document.getElementById('final-message-display');
      if (finalMessage) {
        finalMessage.textContent = config.final_message || defaultConfig.final_message;
      }
    }

    function mapToCapabilities(cfg) {
      return {
        recolorables: [
          {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (value) => { cfg.background_color = value; window.elementSdk.setConfig({ background_color: value }); }
          },
          {
            get: () => cfg.card_color || defaultConfig.card_color,
            set: (value) => { cfg.card_color = value; window.elementSdk.setConfig({ card_color: value }); }
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (value) => { cfg.text_color = value; window.elementSdk.setConfig({ text_color: value }); }
          },
          {
            get: () => cfg.accent_color || defaultConfig.accent_color,
            set: (value) => { cfg.accent_color = value; window.elementSdk.setConfig({ accent_color: value }); }
          },
          {
            get: () => cfg.border_color || defaultConfig.border_color,
            set: (value) => { cfg.border_color = value; window.elementSdk.setConfig({ border_color: value }); }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(cfg) {
      return new Map([
        ["recipient_name", cfg.recipient_name || defaultConfig.recipient_name],
        ["letter_content", cfg.letter_content || defaultConfig.letter_content],
        ["final_message", cfg.final_message || defaultConfig.final_message]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cac76b834d8855b',t:'MTc3MDU2NzcyNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>

</html>
